/*!
 * IgnitionJS v4.1.0 <https://github.com/carsdotcom>
 * @license Apache 2.0
 * @copyright 2014 Cars.com <http://www.cars.com/>
 * @author Mac Heller-Ogden
 * @summary A fast and flexible, module loader/bootstrapper for AngularJS.
 * @requires LABjs 2.0.3 <http://labjs.com/>.
 */
"use strict";!function(){var e=function(e){this.name="IgnitionError",this.message=e},t=function(t){return function(n,r){var s=typeof n,i=!1,o=!1,u=!0;if("object"!==s||(i=null===n)||(o="[object Array]"===Object.prototype.toString.call(n)),"array"===t?u=o:"object"===t&&(o||i)?u=!1:s!==t&&(u=!1),!u&&r)throw new e("Expected `"+t+"` and instead received `"+s+"`");return u}},n=function(e,t,n){var r;if(n=c(n)?n:[],c(e,!0),e=e.concat(n),a(t))return e.indexOf(t)>=0;if(l(t)){r=/ +?/g,t=t.toString().replace(r,"");for(var s=0;s<e.length;s++)if(l(e[s])&&e[s].toString().replace(r,"")===t)return!0}return!1},r=function(t,r){return function(s){if(!r(s))throw new e("Invalid subject");n(t,s)||t.push(s)}},s=function(e,t){c(t,!0);for(var n=0;n<t.length;n++)e(t[n])},i=function(e){for(var t=0;t<e.length;t++)e[t].call(window)},o=function(e,t,n){return"/"!==t.substr(-1)&&(t+="/"),t+e+"."+n},u=function(t){function s(e){return function(){return Array.prototype.slice.call(this[e],0)}}function i(e){S._registerMulti(this.registerSrc,e)}function o(e){S._registerMulti(this.registerFn,e)}function u(t){if(a(t)){var n=b(t),r=n.cleanSubject,s=n.isOptional;this.registerSrc(S.namedSrcs[r],s)}else{if(!c(t))throw new e("Invalid subject");for(var i=0;i<t.length;i++){var o=b(t[i]),r=o.cleanSubject,s=o.isOptional;this.registerSrc(S.namedSrcs[r],s)}}}function b(e){var t=e.indexOf("?")===e.length-1?e.slice(0,e.length-1):e;return{cleanSubject:t,isOptional:e!==t}}function v(){for(var e=[],t=0;t<S.tierCount;t++)e=e.concat(S.tiers[t].srcs);return e}function h(t){return function(r){var s=void 0===arguments[1]?!1:arguments[1];if(!S.tiers[t].validation(r))throw new e("Invalid subject");n(S.tiers[t].srcs,r,v())||(s?S.tiers[t].optionalSrcs.push(r):S.tiers[t].srcs.push(r))}}var p,m,S=this,y={bundles:{validation:function(e){return a(e)&&/^[A-Za-z]+\w*$/.test(e)},dir:"/app/bundles/",loadCss:!1},bootstrap:function(e){angular.bootstrap(document,e)}};t=function M(e){for(var t,n=1;n<arguments.length;++n)if(t=arguments[n],d(t))for(var r in t)t.hasOwnProperty(r)&&(e[r]=d(t[r])?M({},e[r],t[r]):t[r]);return e}({},y,t),S.namedSrcs=d(t.sources)?t.sources:{},S.bundles={},S.bundles.names=[],S.bundles.getNames=s("names"),S.bundles.modules=d(t.bundles.modules)?t.bundles.modules:{},S.bundleModules={},S.bundleModules.names=[],S.bundleModules.getNames=s("names"),S.bundles.validation=t.bundles.validation,l(S.bundles.validation,!0),S.bundles.dir=t.bundles.dir,a(S.bundles.dir,!0),S.bundles.loadCss=t.bundles.loadCss,g(S.bundles.loadCss,!0),S.bundles.registerOne=r(S.bundles.names,S.bundles.validation),S.bundles.registerMany=function(e){S._registerMulti(this.registerOne,e)},S.bundles.register=function(e){var t=void 0===arguments[1]?S.bundles.modules[e]||[e]:arguments[1];return function(){a(e,!0),S.bundles.registerOne(e),S.bundleModules.registerMany(t)}()},S.bundles.getSrcs=function(e){for(var t=this.getNames(),n=[],r="css"===e?!0:!1,s=r?"css":"js",i=0;i<t.length;i++)n.push(S._buildBundlePath(t[i],this.dir,s));return n},S.bundleModules.registerOne=r(S.bundleModules.names,function(){return!0}),S.bundleModules.registerMany=function(e){S._registerMulti(this.registerOne,e)},S.bootstrap=t.bootstrap,l(S.bootstrap,!0),S.tiers=[],c(t.tiers)?(S.tierCount=t.tiers.length,t.tiers=t.tiers):(S.tierCount=2,t.tiers=[]);for(var _=0;_<S.tierCount;_++){S.tiers[_]={},p=t.tiers[_]&&c(t.tiers[_].aliases),S.tiers[_].aliases=m=p?t.tiers[_].aliases:[];for(var w=0;w<m.length;w++){if(!f(S[m[w]]))throw new e("Illegal alias name");S[m[w]]=S.tiers[_]}S.tiers[_].validation=t.tiers[_]&&l(t.tiers[_].validation)?t.tiers[_].validation:a,S.tiers[_].fns=[],S.tiers[_].srcs=[],S.tiers[_].optionalSrcs=[],S.tiers[_].getSrcs=s("srcs"),S.tiers[_].getOptionalSrcs=s("optionalSrcs"),S.tiers[_].getFns=s("fns"),S.tiers[_].registerSrc=h(_),S.tiers[_].registerFn=r(S.tiers[_].fns,l),S.tiers[_].registerSrcs=i,S.tiers[_].registerFns=o,S.tiers[_].register=u}S.ready={fns:[]},S.ready.getFns=s("fns"),S.ready.registerFn=r(S.ready.fns,l),S.ready.registerFns=function(e){S._registerMulti(this.registerFn,e)}},a=void 0,l=void 0,d=void 0,c=void 0,f=void 0,g=void 0;e.prototype=Error.prototype,a=t("string"),l=t("function"),d=t("object"),c=t("array"),f=t("undefined"),g=t("boolean"),u.fn=u.prototype,u.fn._isString=a,u.fn._isFunction=l,u.fn._isObject=d,u.fn._isArray=c,u.fn._isRegistered=n,u.fn._generateRegistration=r,u.fn._registerMulti=s,u.fn._execFunctionQueue=i,u.fn._buildBundlePath=o,u.fn._loadTier=function(e,t){var n=this;return t.optionalScript(n.tiers[e].getOptionalSrcs()).script(n.tiers[e].getSrcs()).wait(function(){n._execFunctionQueue(n.tiers[e].getFns())})},u.fn._injectCss=function(e){var t,n,r=document.getElementsByTagName("head")[0];t=r.getElementsByTagName("link");for(var s=0;s<t.length;s++)if(t[s].getAttribute("href")===e)return;n=document.createElement("link"),n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",e),r.appendChild(n)},u.fn.load=function(){var t,n=this;if(!$LAB)throw new e("$LAB not found.");t=$LAB;for(var r=0;r<n.tierCount;r++)t=n._loadTier(r,t);if(n.bundles.loadCss)for(var s=0,i=n.bundles.getSrcs("css");s<i.length;s++)n._injectCss(i[s]);t.script(n.bundles.getSrcs()).wait(function(){n.bootstrap(n.bundleModules.getNames()),n._execFunctionQueue(n.ready.getFns())})},window.Ignition=u}();