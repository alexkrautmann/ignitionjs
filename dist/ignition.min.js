/*!
 * IgnitionJS v3.3.1 <https://github.com/carsdotcom>
 * @license Apache 2.0
 * @copyright 2014 Cars.com <http://www.cars.com/>
 * @author Mac Heller-Ogden
 * @summary A fast and flexible, module loader/bootstrapper for AngularJS.
 * @requires LABjs 2.0.3 <http://labjs.com/>.
 */
!function(){function e(e){this.name="IgnitionError",this.message=e}function t(t){return function(r,s){var i=typeof r,n=!1,o=!1,u=!0;if("object"!==i||(n=null===r)||(o="[object Array]"===Object.prototype.toString.call(r)),"array"===t?u=o:"object"===t&&(o||n)?u=!1:i!==t&&(u=!1),!u&&s)throw new e("Expected `"+t+"` and instead received `"+i+"`");return u}}function r(e,t,r){var s,i;if(r=d(r)?r:[],d(e,!0),e=e.concat(r),a(t))return e.indexOf(t)>=0;if(l(t))for(i=/ +?/g,t=t.toString().replace(i,""),s=0;s<e.length;s++)if(l(e[s])&&e[s].toString().replace(i,"")===t)return!0;return!1}function s(t,s){return function(i){if(!s(i))throw new e("Invalid subject");r(t,i)||t.push(i)}}function i(e,t){var r;for(d(t,!0),r=0;r<t.length;r++)e(t[r])}function n(e){var t;for(t=0;t<e.length;t++)e[t].call(window)}function o(e,t,r){return"/"!==t.substr(-1)&&(t+="/"),t+e+"/"+e+"."+r}function u(t){function i(e){return function(){return Array.prototype.slice.call(this[e],0)}}function n(e){w._registerMulti(this.registerSrc,e)}function o(e){w._registerMulti(this.registerFn,e)}function u(t){var r;if(a(t))this.registerSrc(w.namedSrcs[t]);else{if(!d(t))throw new e("Invalid subject");for(r=0;r<t.length;r++)this.registerSrc(w.namedSrcs[t[r]])}}function m(){var e,t=[];for(e=0;e<w.tierCount;e++)t=t.concat(w.tiers[e].srcs);return t}function h(t){return function(s){if(!w.tiers[t].validation(s))throw new e("Invalid subject");r(w.tiers[t].srcs,s,m())||w.tiers[t].srcs.push(s)}}var p,v,y,b,w=this,_={modules:{validation:function(e){return a(e)&&/^[A-Za-z]+\w*$/.test(e)},dir:"/app/js/modules/",loadCss:!1,cssDir:"/app/css/modules/",bootstrap:function(e){angular.bootstrap(document,e)}}};for(t=function S(e){var t,r,s;for(t=1;t<arguments.length;++t)if(r=arguments[t],c(r))for(s in r)r.hasOwnProperty(s)&&(e[s]=c(r[s])?S({},e[s],r[s]):r[s]);return e}({},_,t),w.namedSrcs=c(t.sources)?t.sources:{},c(w.namedSrcs,!0),w.modules={},w.modules.names=[],w.modules.getNames=i("names"),w.modules.validation=t.modules.validation,l(w.modules.validation,!0),w.modules.dir=t.modules.dir,a(w.modules.dir,!0),w.modules.loadCss=t.modules.loadCss,g(w.modules.loadCss,!0),w.modules.cssDir=t.modules.cssDir,a(w.modules.cssDir,!0),w.modules.bootstrap=t.modules.bootstrap,l(w.modules.bootstrap,!0),w.modules.registerOne=s(w.modules.names,w.modules.validation),w.modules.registerMany=function(e){w._registerMulti(this.registerOne,e)},w.modules.register=function(t){if(a(t))w.modules.registerOne(t);else{if(!d(t))throw new e("Expected `array` or `string` and instead received `"+typeof t+"`");w.modules.registerMany(t)}},w.modules.getSrcs=function(e){var t,r=this.getNames(),s=[],i="css"===e?!0:!1,n=i?this.cssDir:this.dir,o=i?"css":"js";for(t=0;t<r.length;t++)s.push(w._buildModulePath(r[t],n,o));return s},w.tiers=[],d(t.tiers)?(w.tierCount=t.tiers.length,t.tiers=t.tiers):(w.tierCount=2,t.tiers=[]),p=0;p<w.tierCount;p++){for(w.tiers[p]={},y=t.tiers[p]&&d(t.tiers[p].aliases),w.tiers[p].aliases=b=y?t.tiers[p].aliases:[],v=0;v<b.length;v++){if(!f(w[b[v]]))throw new e("Illegal alias name");w[b[v]]=w.tiers[p]}w.tiers[p].validation=t.tiers[p]&&l(t.tiers[p].validation)?t.tiers[p].validation:a,w.tiers[p].fns=[],w.tiers[p].srcs=[],w.tiers[p].getSrcs=i("srcs"),w.tiers[p].getFns=i("fns"),w.tiers[p].registerSrc=h(p),w.tiers[p].registerFn=s(w.tiers[p].fns,l),w.tiers[p].registerSrcs=n,w.tiers[p].registerFns=o,w.tiers[p].register=u}w.ready={fns:[]},w.ready.getFns=i("fns"),w.ready.registerFn=s(w.ready.fns,l),w.ready.registerFns=function(e){w._registerMulti(this.registerFn,e)}}var a,l,c,d,f,g;e.prototype=Error.prototype,a=t("string"),l=t("function"),c=t("object"),d=t("array"),f=t("undefined"),g=t("boolean"),u.fn=u.prototype,u.fn._isString=a,u.fn._isFunction=l,u.fn._isObject=c,u.fn._isArray=d,u.fn._isRegistered=r,u.fn._generateRegistration=s,u.fn._registerMulti=i,u.fn._execFunctionQueue=n,u.fn._buildModulePath=o,u.fn._loadTier=function(e,t){var r=this;return t.script(r.tiers[e].getSrcs()).wait(function(){r._execFunctionQueue(r.tiers[e].getFns())})},u.fn._injectCss=function(e){var t,r,s,i=document.getElementsByTagName("head")[0];for(t=i.getElementsByTagName("link"),r=0;r<t.length;r++)if(t[r].getAttribute("href")===e)return;s=document.createElement("link"),s.setAttribute("rel","stylesheet"),s.setAttribute("type","text/css"),s.setAttribute("href",e),i.appendChild(s)},u.fn.load=function(){var t,r,s,i,n=this;if(!$LAB)throw new e("$LAB not found.");for(i=$LAB,t=0;t<n.tierCount;t++)i=n._loadTier(t,i);if(n.modules.loadCss)for(r=0,s=n.modules.getSrcs("css");r<s.length;r++)n._injectCss(s[r]);i.script(n.modules.getSrcs()).wait(function(){n.modules.bootstrap(n.modules.getNames()),n._execFunctionQueue(n.ready.getFns())})},window.Ignition=u}();