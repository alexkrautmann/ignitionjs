/*!
 * IgnitionJS v4.0.0 <https://github.com/carsdotcom>
 * @license Apache 2.0
 * @copyright 2014 Cars.com <http://www.cars.com/>
 * @author Mac Heller-Ogden
 * @summary A fast and flexible, module loader/bootstrapper for AngularJS.
 * @requires LABjs 2.0.3 <http://labjs.com/>.
 */
"use strict";!function(){var e=function(e){this.name="IgnitionError",this.message=e},t=function(t){return function(n,r){var s=typeof n,i=!1,u=!1,o=!0;if("object"!==s||(i=null===n)||(u="[object Array]"===Object.prototype.toString.call(n)),"array"===t?o=u:"object"===t&&(u||i)?o=!1:s!==t&&(o=!1),!o&&r)throw new e("Expected `"+t+"` and instead received `"+s+"`");return o}},n=function(e,t,n){var r;if(n=c(n)?n:[],c(e,!0),e=e.concat(n),a(t))return e.indexOf(t)>=0;if(l(t)){r=/ +?/g,t=t.toString().replace(r,"");for(var s=0;s<e.length;s++)if(l(e[s])&&e[s].toString().replace(r,"")===t)return!0}return!1},r=function(t,r){return function(s){if(!r(s))throw new e("Invalid subject");n(t,s)||t.push(s)}},s=function(e,t){c(t,!0);for(var n=0;n<t.length;n++)e(t[n])},i=function(e){for(var t=0;t<e.length;t++)e[t].call(window)},u=function(e,t,n){return"/"!==t.substr(-1)&&(t+="/"),t+e+"."+n},o=function(t){function s(e){return function(){return Array.prototype.slice.call(this[e],0)}}function i(e){p._registerMulti(this.registerSrc,e)}function u(e){p._registerMulti(this.registerFn,e)}function o(t){if(a(t))this.registerSrc(p.namedSrcs[t]);else{if(!c(t))throw new e("Invalid subject");for(var n=0;n<t.length;n++)this.registerSrc(p.namedSrcs[t[n]])}}function b(){for(var e=[],t=0;t<p.tierCount;t++)e=e.concat(p.tiers[t].srcs);return e}function h(t){return function(r){if(!p.tiers[t].validation(r))throw new e("Invalid subject");n(p.tiers[t].srcs,r,b())||p.tiers[t].srcs.push(r)}}var v,m,p=this,y={bundles:{validation:function(e){return a(e)&&/^[A-Za-z]+\w*$/.test(e)},dir:"/app/bundles/",loadCss:!1},bootstrap:function(e){angular.bootstrap(document,e)}};t=function M(e){for(var t,n=1;n<arguments.length;++n)if(t=arguments[n],d(t))for(var r in t)t.hasOwnProperty(r)&&(e[r]=d(t[r])?M({},e[r],t[r]):t[r]);return e}({},y,t),p.namedSrcs=d(t.sources)?t.sources:{},p.bundles={},p.bundles.names=[],p.bundles.getNames=s("names"),p.bundles.modules=d(t.bundles.modules)?t.bundles.modules:{},p.bundleModules={},p.bundleModules.names=[],p.bundleModules.getNames=s("names"),p.bundles.validation=t.bundles.validation,l(p.bundles.validation,!0),p.bundles.dir=t.bundles.dir,a(p.bundles.dir,!0),p.bundles.loadCss=t.bundles.loadCss,g(p.bundles.loadCss,!0),p.bundles.registerOne=r(p.bundles.names,p.bundles.validation),p.bundles.registerMany=function(e){p._registerMulti(this.registerOne,e)},p.bundles.register=function(e){var t=void 0===arguments[1]?p.bundles.modules[e]||[e]:arguments[1];return function(){a(e,!0),p.bundles.registerOne(e),p.bundleModules.registerMany(t)}()},p.bundles.getSrcs=function(e){for(var t=this.getNames(),n=[],r="css"===e?!0:!1,s=r?"css":"js",i=0;i<t.length;i++)n.push(p._buildBundlePath(t[i],this.dir,s));return n},p.bundleModules.registerOne=r(p.bundleModules.names,function(){return!0}),p.bundleModules.registerMany=function(e){p._registerMulti(this.registerOne,e)},p.bootstrap=t.bootstrap,l(p.bootstrap,!0),p.tiers=[],c(t.tiers)?(p.tierCount=t.tiers.length,t.tiers=t.tiers):(p.tierCount=2,t.tiers=[]);for(var _=0;_<p.tierCount;_++){p.tiers[_]={},v=t.tiers[_]&&c(t.tiers[_].aliases),p.tiers[_].aliases=m=v?t.tiers[_].aliases:[];for(var w=0;w<m.length;w++){if(!f(p[m[w]]))throw new e("Illegal alias name");p[m[w]]=p.tiers[_]}p.tiers[_].validation=t.tiers[_]&&l(t.tiers[_].validation)?t.tiers[_].validation:a,p.tiers[_].fns=[],p.tiers[_].srcs=[],p.tiers[_].getSrcs=s("srcs"),p.tiers[_].getFns=s("fns"),p.tiers[_].registerSrc=h(_),p.tiers[_].registerFn=r(p.tiers[_].fns,l),p.tiers[_].registerSrcs=i,p.tiers[_].registerFns=u,p.tiers[_].register=o}p.ready={fns:[]},p.ready.getFns=s("fns"),p.ready.registerFn=r(p.ready.fns,l),p.ready.registerFns=function(e){p._registerMulti(this.registerFn,e)}},a=void 0,l=void 0,d=void 0,c=void 0,f=void 0,g=void 0;e.prototype=Error.prototype,a=t("string"),l=t("function"),d=t("object"),c=t("array"),f=t("undefined"),g=t("boolean"),o.fn=o.prototype,o.fn._isString=a,o.fn._isFunction=l,o.fn._isObject=d,o.fn._isArray=c,o.fn._isRegistered=n,o.fn._generateRegistration=r,o.fn._registerMulti=s,o.fn._execFunctionQueue=i,o.fn._buildBundlePath=u,o.fn._loadTier=function(e,t){var n=this;return t.script(n.tiers[e].getSrcs()).wait(function(){n._execFunctionQueue(n.tiers[e].getFns())})},o.fn._injectCss=function(e){var t,n,r=document.getElementsByTagName("head")[0];t=r.getElementsByTagName("link");for(var s=0;s<t.length;s++)if(t[s].getAttribute("href")===e)return;n=document.createElement("link"),n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",e),r.appendChild(n)},o.fn.load=function(){var t,n=this;if(!$LAB)throw new e("$LAB not found.");t=$LAB;for(var r=0;r<n.tierCount;r++)t=n._loadTier(r,t);if(n.bundles.loadCss)for(var s=0,i=n.bundles.getSrcs("css");s<i.length;s++)n._injectCss(i[s]);t.script(n.bundles.getSrcs()).wait(function(){n.bootstrap(n.bundleModules.getNames()),n._execFunctionQueue(n.ready.getFns())})},window.Ignition=o}();